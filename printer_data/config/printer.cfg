[respond]

#  Octopus Pro boards STM32H723.  Select the appropriate micro-controller in "make
# menuconfig" and select "Enable low-level configuration options". For
#  For STM32H723 boards use a "128KiB bootloader" and a "25Mhz crystal"
# See docs/Config_Reference.md for a description of parameters.
[exclude_object]
[include mainsail.cfg]
[include config/fan.cfg]
[include config/stepper.cfg]
[include config/led.cfg]
[include config/wiper.cfg]
[include macros/macro.cfg]
[include config/therm2-config.cfg]

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT
[display_status]
[pause_resume]
[respond]   #activate messages
[gcode_arcs]  #activate round corner
resolution: 0.1
[force_move]
enable_force_move: True
[gcode_macro FORCE]
gcode:
      SET_KINEMATIC_POSITION X=105 Y=94 Z=20

[shaketune]
result_folder: ~/printer_data/config/ShakeTune_results
number_of_results_to_keep: 10
keep_raw_data: False
show_macros_in_webui: True
timeout: 60
measurements_chunk_size: 2
max_freq: 200
dpi: 300



[gcode_macro _CLIENT_VARIABLE]
variable_use_custom_pos   : True ; use custom park coordinates for x,y [True/False]
variable_custom_park_x    : 15.0   ; custom x position; value must be within your defined min and max of X
variable_custom_park_y    : 15.0   ; custom y position; value must be within your defined min and max of Y
variable_custom_park_dz   : 25.0   ; custom dz value; the value in mm to lift the nozzle when move to park position
variable_retract          : 0.30   ; the value to retract while PAUSE
variable_cancel_retract   : 0.50   ; the value to retract while CANCEL_PRINT
variable_speed_retract    : 35.0  ; retract speed in mm/s
variable_unretract        : 0.60   ; the value to unretract while RESUME
variable_speed_unretract  : 35.0  ; unretract speed in mm/s
variable_speed_hop        : 15.0  ; z move speed in mm/s
variable_speed_move       : 100.0 ; move speed in mm/s
variable_park_at_cancel   : True ; allow to move the toolhead to park while execute CANCEL_PRINT [True/False]
variable_park_at_cancel_x : 15  ; different park position during CANCEL_PRINT [None/Position as Float]; park_at_cancel must be True
variable_park_at_cancel_y : 15  ; different park position during CANCEL_PRINT [None/Position as Float]; park_at_cancel must be True
## !!! Caution [firmware_retraction] must be defined in the printer.cfg if you set use_fw_retract: True !!!
variable_use_fw_retract   : True ; use fw_retraction instead of the manual version [True/False]
variable_idle_timeout     : 0     ; time in sec until idle_timeout kicks in. Value 0 means that no value will be set or restored
#variable_runout_sensor    : "encoder_sensor"    ; If a sensor is defined, it will be used to cancel the execution of RESUME in case no filament is detected.
##                                   Specify the config name of the runout sensor e.g "filament_switch_sensor runout". Hint use the same as in your printer.cfg
## !!! Custom macros, please use with care and review the section of the corresponding macro.
## These macros are for simple operations like setting a status LED. Please make sure your macro does not interfere with the basic macro functions.
## Only  single line commands are supported, please create a macro if you need more than one command.
#variable_user_pause_macro : ""    ; Everything insight the "" will be executed after the klipper base pause (PAUSE_BASE) function
#variable_user_resume_macro: ""    ; Everything insight the "" will be executed before the klipper base resume (RESUME_BASE) function
#variable_user_cancel_macro: ""    ; Everything insight the "" will be executed before the klipper base cancel (CANCEL_PRINT_BASE) function
gcode:

########################
########################
### Printer
########################

[printer]
kinematics: corexy
max_velocity: 1000
max_accel: 60000
minimum_cruise_ratio: 0.7
max_z_velocity: 30
max_z_accel: 2000
square_corner_velocity: 20

#[input_shaper]
#shaper_freq_x: 132.6
#shaper_type_x: ei
#damping_ratio_x: 0.043
#shaper_freq_y: 92.0
#shaper_type_y: ei
#damping_ratio_y: 0.041

[mcu host]
serial: /tmp/klipper_host_mcu

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_32001F000F51313531383332-if00

[mcu scanner]
serial: /dev/serial/by-id/usb-Cartographer_614e_1F000A001653584833373720-if00    

[temperature_sensor Octopus]
sensor_type: temperature_mcu
max_temp: 100

[temperature_sensor raspberry_pi_4B]
sensor_type: temperature_host
min_temp: 10
max_temp: 100 



########################
########################
### Extruder
########################
[extruder]  ##M6
step_pin: PG15
dir_pin: !PB3
enable_pin: !PD5
microsteps: 16
full_steps_per_rotation: 200
rotation_distance: 22.018
Gear_ratio: 50:8
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: PA0
#control: pid
#pid_Kp: 23.216 
#pid_Ki: 1.629 
#pid_Kd: 82.712
min_temp: 0
max_temp: 350

sensor_type: PT1000
sensor_pin: PB0
pullup_resistor: 2200

max_extrude_only_distance: 250.0
max_extrude_cross_section: 250
#pressure_advance: 0.02
pressure_advance_smooth_time: 0.03

[tmc2209 extruder]
uart_pin: PG9
run_current: 0.7
stealthchop_threshold: 0

[firmware_retraction]
retract_length: 0.3
retract_speed: 85
unretract_speed: 85

#[filament_motion_sensor encoder_sensor]
#detection_length: 7
#   The minimum length of filament pulled through the sensor to trigger
#   a state change on the switch_pin
#   Default is 7 mm.
#extruder: extruder
#   The name of the extruder section this sensor is associated with.
#   This parameter must be provided.
#switch_pin: PA9
# changing the switch_pin name according to your motherboard
#pause_on_runout: True
#runout_gcode:
#    M117 Filament switch runout
#insert_gcode: 
#    M117 Filament switch inserted
#event_delay: 
#pause_delay:

########################
########################
### Heatbed
########################

[heater_bed]
heater_pin: PF5
sensor_pin: PB1 # TB
sensor_type: ATC Semitec 104GT-2
min_temp: 0
max_temp: 130
#control: pid
#pid_kp: 54.122
#pid_ki: 2.864
#pid_kd: 255.727
max_power: 0.7

########################
########################
### Cartographer
########################

[scanner]    
mcu: scanner 
x_offset: 0
y_offset: 23    
backlash_comp: 0.00688
sensor: cartographer
sensor_alt: carto   
mesh_runs: 2
samples: 10
samples_tolerance_retries: 8
scanner_touch_sample_count:6
scanner_touch_max_retries:15
scanner_touch_accel: 100
scanner_touch_max_speed: 5 #10

[temperature_sensor Cartographer_MCU]
sensor_type: temperature_mcu
sensor_mcu: scanner
min_temp: 0
max_temp: 105

[adxl345]
cs_pin: scanner:PA3
spi_bus: spi1

[resonance_tester]
accel_chip: adxl345
probe_points:
    115, 115, 10
########################
########################
### Bed Mesh
########################
[safe_z_home]
home_xy_position: 115,115
speed: 200
z_hop: 5
z_hop_speed: 20.0



[bed_mesh]
speed: 400
horizontal_move_z: 5
mesh_min: 14, 23
mesh_max: 204, 195
mesh_pps: 0,0
move_check_distance: 3
probe_count: 30,30
algorithm: bicubic
zero_reference_position: 115,115

[screws_tilt_adjust]
screw1: 27, 0
screw1_name: vorne links
screw2: 27, 175
screw2_name: hinten links
screw3: 196, 175
screw3_name: hinten rechts
screw4: 196, 0
screw4_name: vorne rechts
speed: 200
horizontal_move_z: 5
screw_thread: CW-M4


[axis_twist_compensation]
speed: 5
horizontal_move_z: 5
calibrate_start_x: 15
calibrate_end_x: 195
calibrate_y: 112.5


#[neopixel my_neopixel_1]
#pin: PE10

#[neopixel my_neopixel_2]
#pin: PE9

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# pid_kp = 45.826
#*# pid_ki = 2.122
#*# pid_kd = 247.461
#*# control = pid
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 42.422
#*# pid_ki = 10.877
#*# pid_kd = 41.362
#*#
#*# [scanner]
#*# mode = touch
#*# scanner_touch_threshold = 2500
#*# scanner_touch_speed = 2
#*# scanner_touch_z_offset = 0.085
#*#
#*# [scanner model default]
#*# model_coef = 1.4321184790232628,
#*# 	  1.7735990584691705,
#*# 	  0.777247217576479,
#*# 	  0.17115229740561289,
#*# 	  0.3269165954429628,
#*# 	  1.0439418849403317,
#*# 	  -0.14089864024347992,
#*# 	  -1.1805645500450106,
#*# 	  0.25479959731503926,
#*# 	  0.6431407747789777
#*# model_domain = 3.153463197613572e-07,3.3123141513367427e-07
#*# model_range = 0.200000,5.100000
#*# model_temp = 31.154202
#*# model_offset = 0.00000
#*# model_mode = touch
#*# model_fw_version = CARTOGRAPHER 5.1.0
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.061370, -0.067846, -0.068932, -0.074587, -0.072912, -0.069049, -0.069449, -0.066193, -0.066170, -0.065285, -0.061766, -0.056548, -0.050132, -0.047169, -0.041886, -0.037032, -0.028958, -0.021688, -0.015925, -0.011741, -0.008017, -0.000830, 0.004255, 0.010361, 0.016440, 0.021092, 0.024324, 0.026200, 0.031116, 0.033512
#*# 	-0.059430, -0.062289, -0.062871, -0.067935, -0.065147, -0.065874, -0.065870, -0.065535, -0.063526, -0.060440, -0.056920, -0.054165, -0.050325, -0.045374, -0.039825, -0.033625, -0.028013, -0.022093, -0.016321, -0.011016, -0.004482, 0.001334, 0.007111, 0.011508, 0.017198, 0.022351, 0.023727, 0.024812, 0.029431, 0.030606
#*# 	-0.051355, -0.055901, -0.057767, -0.059308, -0.058745, -0.063049, -0.064139, -0.066274, -0.061776, -0.056763, -0.052681, -0.052122, -0.051029, -0.044237, -0.039098, -0.029975, -0.027344, -0.024041, -0.015562, -0.010437, -0.001981, 0.002074, 0.007810, 0.010821, 0.017798, 0.023878, 0.025467, 0.028421, 0.033668, 0.034357
#*# 	-0.048088, -0.052565, -0.057271, -0.058790, -0.059092, -0.059395, -0.061201, -0.061210, -0.060339, -0.058604, -0.055385, -0.051410, -0.047938, -0.043302, -0.038786, -0.033752, -0.028429, -0.023188, -0.017402, -0.011448, -0.005315, 0.000266, 0.006328, 0.010633, 0.015593, 0.020320, 0.023433, 0.027115, 0.031375, 0.033193
#*# 	-0.046235, -0.046219, -0.048199, -0.053080, -0.058009, -0.055976, -0.057006, -0.054322, -0.056471, -0.058326, -0.052489, -0.049924, -0.043477, -0.041719, -0.037826, -0.034676, -0.025855, -0.018865, -0.014695, -0.009885, -0.005846, 0.000725, 0.006354, 0.010589, 0.015066, 0.018078, 0.021878, 0.024390, 0.026969, 0.030018
#*# 	-0.042536, -0.041470, -0.041687, -0.043817, -0.047218, -0.050578, -0.049679, -0.050287, -0.049492, -0.049068, -0.046144, -0.044327, -0.040709, -0.037761, -0.032838, -0.027596, -0.021012, -0.016675, -0.011791, -0.006116, -0.001742, 0.003950, 0.007923, 0.010863, 0.014604, 0.018245, 0.021750, 0.023630, 0.025137, 0.026702
#*# 	-0.030397, -0.036120, -0.034015, -0.036175, -0.035308, -0.040554, -0.042248, -0.045225, -0.041697, -0.039042, -0.038769, -0.036841, -0.035617, -0.030967, -0.025757, -0.021227, -0.016567, -0.012234, -0.005749, -0.000593, 0.003823, 0.007560, 0.011758, 0.013538, 0.017340, 0.020274, 0.022334, 0.023753, 0.025263, 0.025686
#*# 	-0.025994, -0.026942, -0.030767, -0.032277, -0.032937, -0.033659, -0.036264, -0.038116, -0.035427, -0.035383, -0.035265, -0.033357, -0.029733, -0.024620, -0.022475, -0.018310, -0.016292, -0.008993, -0.000970, 0.004046, 0.005476, 0.007795, 0.012901, 0.014559, 0.018480, 0.019118, 0.019158, 0.021429, 0.020951, 0.021650
#*# 	-0.019396, -0.017983, -0.023639, -0.025099, -0.030374, -0.030045, -0.029228, -0.030613, -0.030403, -0.031575, -0.028000, -0.026470, -0.024758, -0.022263, -0.017910, -0.014447, -0.009259, -0.004989, -0.000463, 0.003590, 0.008335, 0.011176, 0.011117, 0.012542, 0.016378, 0.019487, 0.017859, 0.018699, 0.018142, 0.020964
#*# 	-0.022241, -0.019943, -0.017801, -0.020801, -0.025448, -0.028087, -0.027732, -0.029238, -0.028886, -0.028295, -0.025240, -0.023326, -0.024656, -0.025053, -0.018781, -0.015064, -0.007580, -0.006202, -0.005904, -0.001762, 0.004937, 0.011358, 0.010302, 0.010413, 0.009044, 0.012912, 0.015089, 0.015381, 0.013391, 0.012204
#*# 	-0.014867, -0.021743, -0.020874, -0.022219, -0.021636, -0.027046, -0.029479, -0.029280, -0.028304, -0.028657, -0.027622, -0.026477, -0.024871, -0.023800, -0.021498, -0.017400, -0.012773, -0.007050, -0.004066, -0.000174, -0.000346, 0.004547, 0.010148, 0.009251, 0.007486, 0.004394, 0.007165, 0.007192, 0.010433, 0.007018
#*# 	-0.011363, -0.015434, -0.020887, -0.022420, -0.023321, -0.025231, -0.026916, -0.027900, -0.024943, -0.027281, -0.030215, -0.029114, -0.023608, -0.019276, -0.020835, -0.017678, -0.018962, -0.008704, 0.001298, 0.003938, 0.000276, -0.003934, 0.002386, 0.001689, 0.004646, 0.000978, -0.003167, -0.003942, -0.001597, -0.000424
#*# 	-0.004697, -0.004821, -0.012943, -0.016827, -0.022231, -0.021682, -0.022477, -0.023822, -0.024274, -0.023501, -0.023278, -0.021990, -0.022034, -0.019636, -0.014969, -0.012252, -0.010933, -0.009796, -0.002784, -0.000726, 0.004613, 0.000409, -0.006133, -0.001625, -0.002625, 0.001908, -0.003741, -0.004129, -0.008976, -0.006549
#*# 	-0.005180, -0.005777, -0.008360, -0.010771, -0.015743, -0.018029, -0.020145, -0.020890, -0.023722, -0.020528, -0.019353, -0.013968, -0.017357, -0.022521, -0.014960, -0.012506, -0.001956, -0.005480, -0.008125, -0.006940, -0.000436, 0.004974, -0.002233, -0.004955, -0.011672, -0.007572, -0.005430, -0.007138, -0.012057, -0.017631
#*# 	0.003342, -0.004872, -0.004365, -0.007649, -0.009310, -0.013811, -0.015944, -0.016268, -0.016614, -0.016849, -0.015399, -0.014695, -0.012251, -0.013117, -0.013847, -0.011131, -0.004864, 0.001720, 0.001311, 0.002732, -0.002752, 0.001021, 0.005747, -0.004099, -0.005884, -0.014337, -0.011409, -0.012745, -0.009295, -0.016568
#*# 	0.010209, 0.001486, -0.000407, -0.005049, -0.007337, -0.010471, -0.011958, -0.013787, -0.011440, -0.013924, -0.013904, -0.017290, -0.012234, -0.007672, -0.008722, -0.007145, -0.009651, -0.000519, 0.007421, 0.007491, 0.001916, -0.004726, -0.001633, -0.005914, -0.004842, -0.012393, -0.019272, -0.022064, -0.021666, -0.019313
#*# 	0.008851, 0.009956, 0.000763, -0.002735, -0.008425, -0.009662, -0.010862, -0.013373, -0.014313, -0.014302, -0.014581, -0.013526, -0.012895, -0.010649, -0.007393, -0.007179, -0.004643, -0.004840, -0.000221, 0.000088, 0.003222, -0.002861, -0.011682, -0.008981, -0.012284, -0.011686, -0.021357, -0.030225, -0.032721, -0.031219
#*# 	0.005227, 0.004980, 0.001758, -0.000650, -0.005517, -0.008836, -0.010330, -0.012776, -0.016187, -0.015193, -0.015110, -0.010988, -0.012683, -0.014725, -0.010312, -0.008764, -0.002234, -0.005601, -0.003377, -0.007503, -0.005282, -0.003775, -0.010782, -0.015046, -0.021914, -0.023369, -0.027993, -0.029226, -0.037028, -0.043685
#*# 	0.009701, 0.000296, 0.001705, -0.002115, -0.002352, -0.008449, -0.012673, -0.013340, -0.014451, -0.015200, -0.015759, -0.014709, -0.012937, -0.012800, -0.012082, -0.009968, -0.008946, -0.005664, -0.006128, -0.008192, -0.011460, -0.010859, -0.009854, -0.018606, -0.022819, -0.031238, -0.032170, -0.032545, -0.037596, -0.046484
#*# 	0.011017, 0.007701, 0.005687, 0.000875, -0.000824, -0.003762, -0.006453, -0.009252, -0.010777, -0.012660, -0.012941, -0.015569, -0.011871, -0.008606, -0.007278, -0.010140, -0.013909, -0.008614, -0.007503, -0.004149, -0.009317, -0.015585, -0.016009, -0.021073, -0.024076, -0.030961, -0.036183, -0.042760, -0.048578, -0.054553
#*# 	0.015566, 0.015675, 0.009024, 0.006144, -0.000073, -0.000816, -0.002118, -0.007491, -0.008571, -0.010365, -0.011459, -0.011548, -0.011464, -0.011516, -0.011124, -0.011174, -0.010647, -0.010952, -0.009851, -0.008125, -0.009589, -0.013704, -0.020584, -0.022820, -0.028587, -0.030979, -0.040996, -0.049433, -0.055657, -0.058430
#*# 	0.012089, 0.013121, 0.012268, 0.010842, 0.005921, 0.001333, -0.000856, -0.004401, -0.006053, -0.008868, -0.009974, -0.008810, -0.011326, -0.013143, -0.014075, -0.011603, -0.008799, -0.011521, -0.011888, -0.016026, -0.015014, -0.015655, -0.019863, -0.026969, -0.034336, -0.039799, -0.046663, -0.051174, -0.058156, -0.064732
#*# 	0.017389, 0.010270, 0.013783, 0.015501, 0.010679, 0.003968, -0.002142, -0.004184, -0.005703, -0.006949, -0.010507, -0.011778, -0.013025, -0.012740, -0.013205, -0.013667, -0.013834, -0.014256, -0.015572, -0.017262, -0.019392, -0.021025, -0.022968, -0.031211, -0.038993, -0.046363, -0.051257, -0.054851, -0.062341, -0.072949
#*# 	0.017265, 0.015756, 0.015705, 0.013457, 0.009417, 0.004808, 0.000283, -0.003145, -0.006042, -0.009621, -0.012189, -0.014222, -0.013769, -0.012809, -0.012884, -0.015683, -0.018923, -0.017345, -0.018349, -0.019017, -0.022793, -0.027098, -0.030996, -0.036982, -0.043812, -0.051427, -0.058704, -0.066395, -0.074488, -0.081787
#*# 	0.022676, 0.024171, 0.018524, 0.012606, 0.009655, 0.006006, 0.001444, -0.003934, -0.007667, -0.011111, -0.012969, -0.014629, -0.014777, -0.016326, -0.016287, -0.017248, -0.018174, -0.020098, -0.021244, -0.021873, -0.025306, -0.028936, -0.037101, -0.041033, -0.047804, -0.052538, -0.064033, -0.074147, -0.080582, -0.088096
#*# 	0.025691, 0.024203, 0.023659, 0.019718, 0.015473, 0.010100, 0.004307, -0.001320, -0.006307, -0.009664, -0.011558, -0.010882, -0.013605, -0.016571, -0.018272, -0.017454, -0.016233, -0.021322, -0.022423, -0.027012, -0.028516, -0.030393, -0.035468, -0.043382, -0.050401, -0.059684, -0.068304, -0.076341, -0.085700, -0.094427
#*# 	0.031391, 0.027990, 0.029265, 0.027565, 0.020525, 0.012919, 0.006521, 0.001117, -0.002583, -0.005525, -0.008255, -0.010029, -0.009406, -0.010288, -0.010628, -0.013032, -0.015979, -0.019399, -0.021146, -0.024183, -0.026156, -0.029296, -0.032864, -0.043348, -0.051077, -0.061727, -0.069196, -0.075740, -0.087217, -0.096828
#*# 	0.038195, 0.036185, 0.034443, 0.028981, 0.022069, 0.015513, 0.009123, 0.003783, -0.000519, -0.004623, -0.006193, -0.009100, -0.006903, -0.007614, -0.005856, -0.009844, -0.016159, -0.018950, -0.021991, -0.022964, -0.026444, -0.030256, -0.034074, -0.042132, -0.052502, -0.061961, -0.072231, -0.080676, -0.089431, -0.101674
#*# 	0.041531, 0.039033, 0.033951, 0.026168, 0.022608, 0.017169, 0.010690, 0.004350, -0.000133, -0.004529, -0.005337, -0.004550, -0.006796, -0.009178, -0.013343, -0.012862, -0.017827, -0.018888, -0.022918, -0.025852, -0.027439, -0.029068, -0.034622, -0.042093, -0.052518, -0.064025, -0.078234, -0.088307, -0.098200, -0.110864
#*# 	0.041325, 0.036822, 0.031079, 0.022533, 0.021354, 0.015875, 0.007758, 0.001178, -0.004019, -0.006323, -0.008537, -0.008260, -0.010590, -0.014414, -0.021118, -0.022921, -0.025704, -0.025415, -0.028208, -0.031624, -0.033846, -0.035488, -0.038867, -0.048020, -0.057587, -0.073226, -0.089878, -0.104293, -0.115514, -0.127549
#*# x_count = 30
#*# y_count = 30
#*# mesh_x_pps = 0
#*# mesh_y_pps = 0
#*# algo = direct
#*# tension = 0.2
#*# min_x = 14.0
#*# max_x = 204.0
#*# min_y = 23.0
#*# max_y = 195.0
